# NOTE: The entire scripting language is NOT case sensitive!

script			-> line*
line			-> expression? comment?  # Lines can be extended by ending them with \

expression		-> directive | command  # Expression contents can be modified with script arguments
script_arg		-> "$(" NUMBER ")"
inner_expression	-> directive | inner_command

command			-> TEXT+
inner_command		-> TEXT inner_arg*
inner_arg		-> variable | TEXT
variable		-> \S* ("$(" IDENTIFIER ")" \S*)+

directive		-> "[" directive_body "]"
directive_body		-> foreach_loop | if_expr | delay_expr
foreach_loop		-> inner_expression "foreach" IDENTIFIER  # Inner expression gets access to iterated objects properties through variables
if_expr			-> expression "if" expression ("else" expression)?
delay_expr		-> expression "delayby" NUMBER

comment			-> "#" comment_body
comment_body		-> permissions_guard | scope_guard | .*
permissions_guard	-> "!" IDENTIFIER*
scope_guard		-> "?" scope_name*
scope_name		-> "RemoteAdmin" | "Console" | "GameConsole"

TEXT			-> \S+
IDENTIFIER		-> [a-z]+
NUMBER			-> [0-9]+